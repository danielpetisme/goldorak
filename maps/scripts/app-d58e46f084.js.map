{"version":3,"sources":["app/app.module.js","app/components/luis-application/luis-application.service.js","app/components/luis-application/luis-application.constants.js","app/components/locale/locale.service.js","app/components/locale/locale.constants.js","app/components/language/languages.constants.js","app/components/language/language.service.js","app/components/bot/bot.service.js","app/blocks/handlers/settings.handler.js","app/blocks/config/translation-storage.provider.js","app/blocks/config/luis.config.js","app/blocks/config/localstorage.config.js","app/blocks/config/bot.config.js","app/blocks/config/bing-speech.config.js","app/blocks/config/ translation.config.js","app/settings/settings.state.js","app/settings/settings.service.js","app/settings/settings.controller.js","app/services/microphone.service.js","app/services/luis.service.js","app/services/hears.service.js","app/services/brain.services.js","app/services/bing-speech.service.js","app/home/home.state.js","app/home/home.controller.js","i18n/angular-locale_fr.js","i18n/angular-locale_en.js","app/app.state.js","app/app.constants.js","templateCacheHtml.js"],"names":["run","settingssHandler","initialize","angular","module","$inject","LuisApplicationService","Luis","LUIS_APPLICATIONS","getAll","getCurrent","getApplication","useApplication","application","service","factory","constant","name","appId","subscriptionKey","LocaleService","LOCALES","LanguageService","$q","$translate","LANGUAGES","tmhDynamicLocale","deferred","defer","language","storage","get","resolve","promise","changeLanguage","locale","languageKey","slice","use","set","Bot","$rootScope","Hears","Brain","startListening","isListening","stopListening","then","utterance","$emit","getIntent","text","predict","settingsSavedSuccess","$on","event","settings","useLocale","stt","nlu","isDefined","translationStorageProvider","$cookies","$log","indexOf","getObject","info","putObject","put","value","LuisConfig","LuisProvider","setDefaultApplication","config","localStorageConfig","$localStorageProvider","$sessionStorageProvider","setKeyPrefix","BotConfig","HearsProvider","BrainProvider","setSpeechToText","setDefaultLocale","setNaturalLanguageUnderstanding","BingSpeechConfig","BingSpeechProvider","BING_SPEECH_SUBSCRIPTION_KEY","setSubscriptionKey","translationConfig","$translateProvider","tmhDynamicLocaleProvider","useLoader","urlTemplate","preferredLanguage","useStorage","useSanitizeValueStrategy","addInterpolation","localeLocationPattern","useCookieStorage","storageKey","stateConfig","$stateProvider","state","parent","url","templateUrl","controller","controllerAs","translatePartialLoader","$translatePartialLoader","addPart","refresh","locales","luisApplications","Settings","$localStorage","save","Object","assign","defaults","load","SettingsController","$state","vm","go","this","luisApplciations","Microphone","$window","getAudioPermission","navigator","getUserMedia","audio","stream","error","reject","startRecording","recorder","RecordRTC","type","numberOfAudioChannels","recording","stopRecording","getBlob","isRecording","webkitGetUserMedia","mozGetUserMedia","$http","$application","predictEndpoint","$luisApiUrl","data","push","post","headers","Ocp-Apim-Subscription-Key","response","getJsonData","status","Error","intentResponse","intent","IntentsResults","Name","entities","EntitiesResults","$defaultApplication","$get","setLuisApiUrl","luisApiUrl","defaultApplication","provider","$injector","$locale","sst","$sst","recognize","SpeechToText","$defaultLocale","debug","defaultLocale","$nlu","NaturalLanguageUnderstanding","BingSpeech","uuid4","getToken","$subscriptionKey","token","$BingSpeechApiUrl","params","version","requestid","generate","appID","format","device.os","scenarios","instanceid","Authorization","Content-Type","getSpeechResponse","speechResponse","header","lexical","charAt","toUpperCase","authenticationToken","tokenExpirationDate","Date","now","$issueTokenUrl","storeToken","luisApplication","HomeController","$scope","hotkeys","welcomeMessage","messages","user","timestamp","getTime","content","toggleRecording","process","handleError","request","submit","add","combo","description","instant","callback","$provide","PLURAL_CATEGORY","ZERO","ONE","TWO","FEW","MANY","OTHER","DATETIME_FORMATS","AMPMS","DAY","ERANAMES","ERAS","FIRSTDAYOFWEEK","MONTH","SHORTDAY","SHORTMONTH","STANDALONEMONTH","WEEKENDRANGE","fullDate","longDate","medium","mediumDate","mediumTime","short","shortDate","shortTime","NUMBER_FORMATS","CURRENCY_SYM","DECIMAL_SEP","GROUP_SEP","PATTERNS","gSize","lgSize","maxFrac","minFrac","minInt","negPre","negSuf","posPre","posSuf","id","localeID","pluralCat","n","opt_precision","i","getDecimals","length","getVF","v","undefined","Math","min","base","pow","f","vf","$urlRouterProvider","otherwise","abstract","template","$templateCache"],"mappings":"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","file":"../../scripts/app-d58e46f084.js","sourcesContent":["(function () {\n  'use strict';\n\n  angular\n    .module('app', [\n      'ui.router',\n      'ui.bootstrap',\n      'ngStorage',\n      'ngCookies',\n      'uuid4',\n      'angularMoment',\n      'luegg.directives',\n      'ngCookies',\n      'tmh.dynamicLocale',\n      'pascalprecht.translate',\n      'cfp.hotkeys'\n    ]).run(run);\n\n  run.$inject = ['settingssHandler'];\n\n  function run(settingssHandler) {\n    settingssHandler.initialize();\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .factory('LuisApplicationService', LuisApplicationService);\n\n  LuisApplicationService.$inject = ['Luis', 'LUIS_APPLICATIONS'];\n\n  function LuisApplicationService(Luis, LUIS_APPLICATIONS) {\n    var service = {\n      getAll: getAll,\n      getCurrent: getCurrent,\n      useApplication: useApplication\n    };\n\n    return service;\n\n    function getAll() {\n      return LUIS_APPLICATIONS;\n    }\n\n    function getCurrent() {\n      return Luis.getApplication();\n    }\n\n    function useApplication(application) {\n      Luis.useApplication(application);\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .constant('LUIS_APPLICATIONS', [{\n      name: \"Snowcamp 2017\",\n      appId: \"496aaf6a-10e6-48fa-8b17-15658ddabde2\",\n      subscriptionKey: \"ebc99ea1bfe8481d9c01f8145a553187\"\n    }]);\n})();\n","(function () {\n  'use strict';\n  angular\n    .module('app')\n    .factory('LocaleService', LocaleService);\n\n  LocaleService.$inject = ['LOCALES'];\n\n  function LocaleService(LOCALES) {\n    var service = {\n      getAll: getAll\n    };\n\n    function getAll() {\n      return LOCALES;\n    }\n\n    return service;\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n\n    /*\n     Languages codes are ISO_639-1 codes, see http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes\n     They are written in English to avoid character encoding issues (not a perfect solution)\n     */\n    .constant('LOCALES', [\n      \"de-DE\",\n      \"es-ES\",\n      \"en-GB\",\n      \"en-US\",\n      \"fr-FR\",\n      \"it-IT\",\n      \"zh-CN\",\n      \"zh-TW\",\n      \"ja-JP\",\n      \"en-IN\",\n      \"pt-BR\",\n      \"ko-KR\",\n      \"fr-CA\",\n      \"en-AU\",\n      \"zh-HK\",\n      \"ar-EG\",\n      \"fi-FI\",\n      \"vpt-PT\",\n      \"en-NZ\",\n      \"pl-PL\",\n      \"en-CA\",\n      \"ru-RU\",\n      \"da-DK\",\n      \"nl-NL\",\n      \"ca-ES\",\n      \"nb-NO\",\n      \"es-MX\",\n      \"sv-SE\"\n    ]);\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n\n    /*\n     Languages codes are ISO_639-1 codes, see http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes\n     They are written in English to avoid character encoding issues (not a perfect solution)\n     */\n    .constant('LANGUAGES', [\n      'en',\n      'fr'\n    ]);\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .factory('LanguageService', LanguageService);\n\n  LanguageService.$inject = ['$q', '$translate', 'LANGUAGES', 'tmhDynamicLocale'];\n\n  function LanguageService($q, $translate, LANGUAGES, tmhDynamicLocale) {\n    var service = {\n      getAll: getAll,\n      getCurrent: getCurrent,\n      changeLanguage: changeLanguage\n    };\n\n    return service;\n\n    function getAll() {\n      return LANGUAGES;\n    }\n\n    function getCurrent() {\n      var deferred = $q.defer();\n      var language = $translate.storage().get('NG_TRANSLATE_LANG_KEY');\n      deferred.resolve(language);\n      return deferred.promise;\n    }\n\n    function changeLanguage(locale) {\n      var languageKey = locale.slice(0, 2);\n      if (languageKey) {\n        $translate.use(languageKey);\n        tmhDynamicLocale.set(languageKey);\n      }\n    }\n  }\n})();\n"," (function () {\n   'use strict';\n   angular\n     .module('app')\n     .factory('Bot', Bot);\n\n   Bot.$inject = ['$rootScope', 'Hears', 'Brain'];\n\n   function Bot($rootScope, Hears, Brain) {\n     var service = {\n       startListening: startListening,\n       isListening: isListening,\n       stopListening: stopListening,\n       getIntent: getIntent\n     };\n\n     function startListening() {\n       Hears.startListening();\n     }\n\n     function isListening() {\n       return Hears.isListening();\n     }\n\n     function stopListening() {\n       return Hears.stopListening().then(function (utterance) {\n         $rootScope.$emit('bot::listened', utterance);\n         return utterance;\n       });\n     }\n\n     function getIntent(text) {\n       return Brain.predict(text);\n     }\n\n     return service;\n   }\n })();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .factory('settingssHandler', settingssHandler);\n\n  settingssHandler.$inject = ['$rootScope', 'Hears', 'LanguageService', 'Luis'];\n\n  function settingssHandler($rootScope, Hears, LanguageService, Luis) {\n    return {\n      initialize: initialize\n    };\n\n    function initialize() {\n      var settingsSavedSuccess = $rootScope.$on('settings:saved', function (event, settings) {\n        Hears.useLocale(settings.stt.locale);\n        LanguageService.changeLanguage(settings.stt.locale);\n        Luis.useApplication(settings.nlu.application);\n      });\n\n      $rootScope.$on('$destroy', function () {\n        if (angular.isDefined(settingsSavedSuccess) && settingsSavedSuccess !== null) {\n          settingsSavedSuccess();\n        }\n      });\n    }\n  }\n})();\n","(function () {\n  'use strict';\n  angular\n    .module('app')\n    .factory('translationStorageProvider', translationStorageProvider);\n\n  translationStorageProvider.$inject = ['$cookies', '$log', 'LANGUAGES'];\n\n  function translationStorageProvider($cookies, $log, LANGUAGES) {\n    return {\n      get: get,\n      put: put\n    };\n\n    function get(name) {\n      if (LANGUAGES.indexOf($cookies.getObject(name)) === -1) {\n        $log.info('Resetting invalid cookie language \"' + $cookies.getObject(name) + '\" to prefered language \"en\"');\n        $cookies.putObject(name, 'en');\n      }\n      return $cookies.getObject(name);\n    }\n\n    function put(name, value) {\n      $cookies.putObject(name, value);\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .config(LuisConfig);\n\n  LuisConfig.$inject = ['LuisProvider', 'LUIS_APPLICATIONS'];\n\n  function LuisConfig(LuisProvider, LUIS_APPLICATIONS) {\n    LuisProvider.setDefaultApplication(LUIS_APPLICATIONS[0]);\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .config(localStorageConfig);\n\n  localStorageConfig.$inject = ['$localStorageProvider', '$sessionStorageProvider'];\n\n  function localStorageConfig($localStorageProvider, $sessionStorageProvider) {\n    $localStorageProvider.setKeyPrefix('goldorak-');\n    $sessionStorageProvider.setKeyPrefix('goldorak-');\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .config(BotConfig);\n\n  BotConfig.$inject = ['HearsProvider', 'BrainProvider'];\n\n  function BotConfig(HearsProvider, BrainProvider) {\n    HearsProvider.setSpeechToText('BingSpeech');\n    HearsProvider.setDefaultLocale('fr-FR');\n    BrainProvider.setNaturalLanguageUnderstanding('Luis');\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .config(BingSpeechConfig);\n\n  BingSpeechConfig.$inject = ['BingSpeechProvider', 'BING_SPEECH_SUBSCRIPTION_KEY'];\n\n  function BingSpeechConfig(BingSpeechProvider, BING_SPEECH_SUBSCRIPTION_KEY) {\n    BingSpeechProvider.setSubscriptionKey(BING_SPEECH_SUBSCRIPTION_KEY);\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .config(translationConfig);\n\n  translationConfig.$inject = ['$translateProvider', 'tmhDynamicLocaleProvider'];\n\n  function translationConfig($translateProvider, tmhDynamicLocaleProvider) {\n    // Initialize angular-translate\n    $translateProvider.useLoader('$translatePartialLoader', {\n      urlTemplate: 'i18n/{lang}/{part}.json'\n    });\n\n    $translateProvider.preferredLanguage('en');\n    $translateProvider.useStorage('translationStorageProvider');\n    $translateProvider.useSanitizeValueStrategy('escaped');\n    $translateProvider.addInterpolation('$translateMessageFormatInterpolation');\n\n    tmhDynamicLocaleProvider.localeLocationPattern('i18n/angular-locale_{{locale}}.js');\n    tmhDynamicLocaleProvider.useCookieStorage();\n    tmhDynamicLocaleProvider.storageKey('NG_TRANSLATE_LANG_KEY');\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .config(stateConfig);\n\n  stateConfig.$inject = ['$stateProvider'];\n\n  function stateConfig($stateProvider) {\n    $stateProvider\n      .state('settings', {\n        parent: 'app',\n        url: '/settings',\n        templateUrl: 'app/settings/settings.html',\n        controller: 'SettingsController',\n        controllerAs: 'vm',\n        resolve: {\n          translatePartialLoader: ['$translate', '$translatePartialLoader', function ($translate, $translatePartialLoader) {\n            $translatePartialLoader.addPart('settings');\n            $translatePartialLoader.addPart('global');\n            return $translate.refresh();\n          }],\n          locales: ['LocaleService', function (LocaleService) {\n            return LocaleService.getAll();\n          }],\n          luisApplications: ['LuisApplicationService', function (LuisApplicationService) {\n            return LuisApplicationService.getAll();\n          }]\n        }\n      });\n  }\n})();\n","(function () {\n  'use strict';\n  angular\n    .module('app')\n    .factory('Settings', Settings);\n\n  Settings.$inject = ['$localStorage', '$log', '$rootScope'];\n\n  function Settings($localStorage, $log, $rootScope) {\n    var service = {\n      save: save,\n      load: load\n    };\n\n    var defaults = {\n      stt: {\n        locale: 'en-US'\n      }\n    };\n\n    var settings = load();\n    if (!settings) {\n      save(defaults);\n    }\n\n    function save(settings) {\n      settings = Object.assign({}, defaults, settings);\n      $localStorage.settings = settings;\n      $rootScope.$emit('settings:saved', settings);\n    }\n\n    function load() {\n      return $localStorage.settings;\n    }\n\n    return service;\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .controller('SettingsController', SettingsController);\n\n  SettingsController.$inject = ['$log', '$state', 'Settings', 'locales', 'luisApplications'];\n\n  function SettingsController($log, $state, Settings, locales, luisApplications) {\n    var vm = this;\n    vm.save = save;\n    vm.settings = Settings.load();\n    vm.locales = locales;\n    vm.luisApplciations = luisApplications;\n\n    function save() {\n      Settings.save(vm.settings);\n      $state.go('home');\n    }\n  }\n})();\n","(function () {\n  'use strict';\n  angular\n    .module('app')\n    .factory('Microphone', Microphone);\n\n  Microphone.$inject = ['$log', '$q', '$window'];\n\n  function Microphone($log, $q, $window) {\n    var service = {\n      startRecording: startRecording,\n      stopRecording: stopRecording,\n      isRecording: isRecording\n    };\n\n    $window.navigator.getUserMedia = $window.navigator.getUserMedia || $window.navigator.webkitGetUserMedia || $window.navigator.mozGetUserMedia;\n\n    function getAudioPermission() {\n      var deferred = $q.defer();\n      $window.navigator.getUserMedia({\n        audio: true\n      }, function (stream) {\n        deferred.resolve(stream);\n      }, function (error) {\n        deferred.reject(error);\n      });\n      return deferred.promise;\n    }\n\n    var recording = false;\n    var recorder;\n\n    function startRecording() {\n      getAudioPermission()\n        .then(function (stream) {\n          recorder = new RecordRTC(stream, {\n            type: 'audio',\n            numberOfAudioChannels: 1\n          });\n          recorder.startRecording();\n          recording = true;\n        }).catch(function (error) {\n          $log.error(error);\n        });\n    }\n\n    function stopRecording() {\n      var deferred = $q.defer();\n      recorder.stopRecording(function () {\n        recording = false;\n        deferred.resolve(recorder.getBlob());\n      });\n      return deferred.promise;\n    }\n\n    function isRecording() {\n      return recording;\n    }\n\n    return service;\n  }\n})();\n","(function () {\n  'use strict';\n  angular\n    .module('app')\n    .provider('Luis', LuisProvider);\n\n  LuisProvider.$inject = [];\n\n  function LuisProvider() {\n    this.$get = Luis;\n\n    var $luisApiUrl = 'https://westus.api.cognitive.microsoft.com/luis/v1.0/prog/apps/';\n    var $defaultApplication;\n\n    this.setLuisApiUrl = function (luisApiUrl) {\n      $luisApiUrl = luisApiUrl;\n    };\n\n    this.setDefaultApplication = function (defaultApplication) {\n      $defaultApplication = defaultApplication;\n    };\n\n    Luis.$inject = ['$http', '$log', '$rootScope'];\n\n    function Luis($http, $log, $rootScope) {\n      var service = {\n        useApplication: useApplication,\n        getApplication: getApplication,\n        predict: predict\n      };\n\n      var $application;\n\n      function useApplication(application) {\n        $application = application;\n      }\n\n      function getApplication() {\n        return $application;\n      }\n\n      if (!$application && $defaultApplication) {\n        useApplication($defaultApplication);\n      } else {\n        throw new Error(\"You must define at least one Luis application\");\n      }\n\n      function predict(utterance) {\n        $rootScope.$emit('luis:predict', {\n          application: $application,\n          utterance: utterance\n        });\n        var predictEndpoint = $luisApiUrl + $application.appId + \"/predict\";\n        var data = [];\n        data.push(utterance);\n        return $http.post(predictEndpoint, data, {\n          headers: {\n            'Ocp-Apim-Subscription-Key': $application.subscriptionKey\n          }\n        }).then(function (response) {\n          return getIntent(getJsonData(response));\n        });\n      }\n\n      function getJsonData(response) {\n        if (response && response.status === 200) {\n          return response.data[0];\n        }\n        throw new Error(\"Natural Language Understanding failed\");\n      }\n\n      function getIntent(intentResponse) {\n        var intent = {\n          application: $application,\n          intent: intentResponse.IntentsResults[0].Name,\n          entities: intentResponse.EntitiesResults\n        };\n        $rootScope.$emit('luis:getIntent', intent);\n        return intent;\n      }\n\n      return service;\n    }\n  }\n})();\n","(function () {\n  'use strict';\n  angular\n    .module('app')\n    .provider('Hears', HearsProvider);\n\n  HearsProvider.$inject = [];\n\n  function HearsProvider() {\n    this.$get = Hears;\n    var $sst;\n    var $defaultLocale = 'en-US';\n\n    this.setSpeechToText = function (sst) {\n      $sst = sst;\n    };\n\n    this.setDefaultLocale = function (defaultLocale) {\n      $defaultLocale = defaultLocale;\n    };\n\n    Hears.$inject = ['$injector', '$log', '$rootScope', 'Microphone'];\n\n    function Hears($injector, $log, $rootScope, Microphone) {\n      var service = {\n        startListening: startListening,\n        isListening: Microphone.isRecording,\n        stopListening: stopListening,\n        locale: locale,\n        useLocale: useLocale\n      };\n\n      var $locale;\n      var SpeechToText;\n\n      function useLocale(locale) {\n        $locale = locale;\n      }\n\n      function locale() {\n        return $locale;\n      }\n\n      useLocale($defaultLocale);\n\n      if ($sst) {\n        $log.debug('Speech To Text Engine: ' + $sst);\n        SpeechToText = $injector.get($sst);\n      } else {\n        throw new Error('You must define a SpeechToText engine');\n      }\n\n      function startListening() {\n        Microphone.startRecording();\n        $rootScope.$emit('hears:onStartListening', {\n          sst: $sst,\n          locale: $locale\n        });\n      }\n\n      function stopListening() {\n        $rootScope.$emit('hears:onStopListening', {\n          sst: $sst,\n          locale: $locale\n        });\n        return Microphone\n        .stopRecording()\n        .then(recognize);\n      }\n\n      function recognize(audio) {\n        $rootScope.$emit('hears:onRecognize', {\n          sst: $sst,\n          locale: $locale,\n          audio: audio\n        });\n        return SpeechToText.recognize(audio, $locale);\n      }\n\n      return service;\n    }\n  }\n})();\n","(function () {\n  'use strict';\n  angular\n    .module('app')\n    .provider('Brain', BrainProvider);\n\n  BrainProvider.$inject = [];\n\n  function BrainProvider() {\n    this.$get = Brain;\n    var $nlu;\n    this.setNaturalLanguageUnderstanding = function (nlu) {\n      $nlu = nlu;\n    };\n\n    Brain.$inject = ['$injector', '$log', '$rootScope'];\n\n    function Brain($injector, $log, $rootScope) {\n      var service = {\n        predict: predict\n      };\n\n      var NaturalLanguageUnderstanding;\n      if ($nlu) {\n        $log.debug('Natural Language Understanding Engine: ' + $nlu);\n        NaturalLanguageUnderstanding = $injector.get($nlu);\n      } else {\n        throw new Error('You must define a NaturalLanguageUnderstanding engine');\n      }\n\n      function predict(text) {\n        $rootScope.$emit('brain:onProcess', {\n          nlu: $nlu,\n          text: text\n        });\n        return NaturalLanguageUnderstanding.predict(text);\n      }\n\n      return service;\n    }\n  }\n})();\n","(function () {\n  'use strict';\n  angular\n    .module('app')\n    .provider('BingSpeech', BingSpeechProvider);\n\n  BingSpeechProvider.$inject = [];\n\n  function BingSpeechProvider() {\n    this.$get = BingSpeech;\n\n    var $subscriptionKey;\n    var $BingSpeechApiUrl = 'https://speech.platform.bing.com';\n    var $issueTokenUrl = 'https://api.cognitive.microsoft.com/sts/v1.0/issueToken';\n\n    this.setSubscriptionKey = function (subscriptionKey) {\n      $subscriptionKey = subscriptionKey;\n    };\n\n    BingSpeech.$inject = ['$log', '$http', '$localStorage', '$q', 'uuid4'];\n\n    function BingSpeech($log, $http, $localStorage, $q, uuid4) {\n      var service = {\n        recognize: recognize\n      };\n\n      function recognize(audio, locale) {\n        $log.debug(\"Recognizing audio with locale: \" + locale);\n        return getToken($subscriptionKey).then(function (token) {\n          return $http.post($BingSpeechApiUrl + '/recognize', audio, {\n            params: {\n              'version': '3.0',\n              'requestid': uuid4.generate(),\n              'appID': 'D4D52672-91D7-4C74-8AD8-42B1D98141A5', // magic value as per MS docs,\n              'format': 'json',\n              'locale': locale,\n              'device.os': '0_0',\n              'scenarios': 'ulm',\n              'instanceid': uuid4.generate()\n            },\n            headers: {\n              'Authorization': 'Bearer ' + token,\n              'Content-Type': 'audio/wav; samplerate=44100'\n            }\n          });\n        })\n        .then(function (response) {\n          return getSpeechResponse(getJsonData(response));\n        });\n      }\n\n      function getJsonData(response) {\n        if (response) {\n          return response.data;\n        }\n        throw new Error(\"Bing Speech recognition's reponse is empty\");\n      }\n\n      function getSpeechResponse(speechResponse) {\n        if (speechResponse.header.status === \"success\") {\n          var text = speechResponse.header.lexical;\n          $log.debug('Here: ' + text);\n          return text.charAt(0).toUpperCase() + text.slice(1);\n        }\n        throw new Error(\"Speech recognition failed\");\n      }\n\n      function getToken(subscriptionKey) {\n        var deferred = $q.defer();\n        var token = $localStorage.authenticationToken;\n        var tokenExpirationDate = $localStorage.tokenExpirationDate;\n\n        if (token && tokenExpirationDate > Date.now()) {\n          deferred.resolve(token);\n        } else {\n          $http.post($issueTokenUrl, {}, {\n            headers: {\n              'Ocp-Apim-Subscription-Key': subscriptionKey\n            }\n          }).then(function (response) {\n            token = response.data;\n            storeToken(token);\n            deferred.resolve(token);\n          }).catch(function (error) {\n            $log.error(\"Unable to authenticate the request with subscription key: \" + subscriptionKey);\n            deferred.reject(error);\n          });\n        }\n        return deferred.promise;\n      }\n\n      function storeToken(token) {\n        $localStorage.authenticationToken = token;\n        //      Refresh access token every 9 minutes\n        $localStorage.tokenExpirationDate = Date.now() + 9 * 60 * 1000;\n      }\n\n      return service;\n    }\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .config(stateConfig);\n\n  stateConfig.$inject = ['$stateProvider'];\n\n  function stateConfig($stateProvider) {\n    $stateProvider\n      .state('home', {\n        parent: 'app',\n        url: '/',\n        templateUrl: 'app/home/home.html',\n        controller: 'HomeController',\n        controllerAs: 'vm',\n        resolve: {\n          translatePartialLoader: ['$translate', '$translatePartialLoader', function ($translate, $translatePartialLoader) {\n            $translatePartialLoader.addPart('home');\n            $translatePartialLoader.addPart('global');\n            return $translate.refresh();\n          }],\n          locale: ['Settings', function (Settings) {\n            var settings = Settings.load();\n            return settings.stt.locale;\n          }],\n          luisApplication: ['Settings', function (Settings) {\n            var settings = Settings.load();\n            return settings.nlu.application;\n          }]\n        }\n      });\n  }\n})();\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .controller('HomeController', HomeController);\n\n  HomeController.$inject = ['$rootScope', '$scope', '$log', '$translate', 'hotkeys', 'Bot'];\n\n  function HomeController($rootScope, $scope, $log, $translate, hotkeys, Bot) {\n    var vm = this;\n\n    vm.toggleRecording = toggleRecording;\n    vm.isRecording = Bot.isListening;\n    vm.submit = submit;\n    vm.messages = [];\n\n    hotkeys.add({\n      combo: 'ctrl+space',\n      description: $translate.instant('home.hotkey'),\n      callback: vm.toggleRecording\n    });\n\n    welcomeMessage();\n\n    function welcomeMessage() {\n      vm.messages.push({\n        user: \"goldorak\",\n        timestamp: new Date().getTime(),\n        content: 'home.welcome'\n      });\n    }\n\n    function toggleRecording() {\n      if (Bot.isListening()) {\n        Bot.stopListening().then(process).catch(handleError);\n      } else {\n        Bot.startListening();\n      }\n    }\n\n    function process(request) {\n      vm.messages.push({\n        user: \"me\",\n        timestamp: new Date().getTime(),\n        content: request\n      });\n\n      Bot.getIntent(request).then(function (intent) {\n        vm.messages.push({\n          user: \"goldorak\",\n          timestamp: new Date().getTime(),\n          content: intent.intent\n        });\n      }).catch(function (error) {\n        vm.messages.push({\n          user: \"goldorak\",\n          timestamp: new Date().getTime(),\n          content: error\n        });\n      });\n    }\n\n    function handleError() {\n      vm.messages.push({\n        user: \"goldorak\",\n        timestamp: new Date().getTime(),\n        content: 'home.stt.failed'\n      });\n    }\n\n    function submit() {\n      if (vm.text) {\n        process(vm.text);\n      }\n      vm.text = \"\";\n    }\n\n    // var botListened = $rootScope.$on('bot::listened', function (event, data) {\n    //   process(data.text);\n    // });\n    //\n    // $rootScope.$on('$destroy', function () {\n    //   if (angular.isDefined(botListened) && botListened !== null) {\n    //     botListened();\n    //   }\n    // });\n  }\n})();\n","'use strict';\nangular.module(\"ngLocale\", [], [\"$provide\", function($provide) {\nvar PLURAL_CATEGORY = {ZERO: \"zero\", ONE: \"one\", TWO: \"two\", FEW: \"few\", MANY: \"many\", OTHER: \"other\"};\n$provide.value(\"$locale\", {\n  \"DATETIME_FORMATS\": {\n    \"AMPMS\": [\n      \"AM\",\n      \"PM\"\n    ],\n    \"DAY\": [\n      \"dimanche\",\n      \"lundi\",\n      \"mardi\",\n      \"mercredi\",\n      \"jeudi\",\n      \"vendredi\",\n      \"samedi\"\n    ],\n    \"ERANAMES\": [\n      \"avant J\\u00e9sus-Christ\",\n      \"apr\\u00e8s J\\u00e9sus-Christ\"\n    ],\n    \"ERAS\": [\n      \"av. J.-C.\",\n      \"ap. J.-C.\"\n    ],\n    \"FIRSTDAYOFWEEK\": 0,\n    \"MONTH\": [\n      \"janvier\",\n      \"f\\u00e9vrier\",\n      \"mars\",\n      \"avril\",\n      \"mai\",\n      \"juin\",\n      \"juillet\",\n      \"ao\\u00fbt\",\n      \"septembre\",\n      \"octobre\",\n      \"novembre\",\n      \"d\\u00e9cembre\"\n    ],\n    \"SHORTDAY\": [\n      \"dim.\",\n      \"lun.\",\n      \"mar.\",\n      \"mer.\",\n      \"jeu.\",\n      \"ven.\",\n      \"sam.\"\n    ],\n    \"SHORTMONTH\": [\n      \"janv.\",\n      \"f\\u00e9vr.\",\n      \"mars\",\n      \"avr.\",\n      \"mai\",\n      \"juin\",\n      \"juil.\",\n      \"ao\\u00fbt\",\n      \"sept.\",\n      \"oct.\",\n      \"nov.\",\n      \"d\\u00e9c.\"\n    ],\n    \"STANDALONEMONTH\": [\n      \"Janvier\",\n      \"F\\u00e9vrier\",\n      \"Mars\",\n      \"Avril\",\n      \"Mai\",\n      \"Juin\",\n      \"Juillet\",\n      \"Ao\\u00fbt\",\n      \"Septembre\",\n      \"Octobre\",\n      \"Novembre\",\n      \"D\\u00e9cembre\"\n    ],\n    \"WEEKENDRANGE\": [\n      5,\n      6\n    ],\n    \"fullDate\": \"EEEE d MMMM y\",\n    \"longDate\": \"d MMMM y\",\n    \"medium\": \"d MMM y HH:mm:ss\",\n    \"mediumDate\": \"d MMM y\",\n    \"mediumTime\": \"HH:mm:ss\",\n    \"short\": \"dd/MM/y HH:mm\",\n    \"shortDate\": \"dd/MM/y\",\n    \"shortTime\": \"HH:mm\"\n  },\n  \"NUMBER_FORMATS\": {\n    \"CURRENCY_SYM\": \"\\u20ac\",\n    \"DECIMAL_SEP\": \",\",\n    \"GROUP_SEP\": \"\\u00a0\",\n    \"PATTERNS\": [\n      {\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 3,\n        \"minFrac\": 0,\n        \"minInt\": 1,\n        \"negPre\": \"-\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\",\n        \"posSuf\": \"\"\n      },\n      {\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 2,\n        \"minFrac\": 2,\n        \"minInt\": 1,\n        \"negPre\": \"-\",\n        \"negSuf\": \"\\u00a0\\u00a4\",\n        \"posPre\": \"\",\n        \"posSuf\": \"\\u00a0\\u00a4\"\n      }\n    ]\n  },\n  \"id\": \"fr\",\n  \"localeID\": \"fr\",\n  \"pluralCat\": function(n, opt_precision) {  var i = n | 0;  if (i == 0 || i == 1) {    return PLURAL_CATEGORY.ONE;  }  return PLURAL_CATEGORY.OTHER;}\n});\n}]);\n","'use strict';\nangular.module(\"ngLocale\", [], [\"$provide\", function($provide) {\nvar PLURAL_CATEGORY = {ZERO: \"zero\", ONE: \"one\", TWO: \"two\", FEW: \"few\", MANY: \"many\", OTHER: \"other\"};\nfunction getDecimals(n) {\n  n = n + '';\n  var i = n.indexOf('.');\n  return (i == -1) ? 0 : n.length - i - 1;\n}\n\nfunction getVF(n, opt_precision) {\n  var v = opt_precision;\n\n  if (undefined === v) {\n    v = Math.min(getDecimals(n), 3);\n  }\n\n  var base = Math.pow(10, v);\n  var f = ((n * base) | 0) % base;\n  return {v: v, f: f};\n}\n\n$provide.value(\"$locale\", {\n  \"DATETIME_FORMATS\": {\n    \"AMPMS\": [\n      \"AM\",\n      \"PM\"\n    ],\n    \"DAY\": [\n      \"Sunday\",\n      \"Monday\",\n      \"Tuesday\",\n      \"Wednesday\",\n      \"Thursday\",\n      \"Friday\",\n      \"Saturday\"\n    ],\n    \"ERANAMES\": [\n      \"Before Christ\",\n      \"Anno Domini\"\n    ],\n    \"ERAS\": [\n      \"BC\",\n      \"AD\"\n    ],\n    \"FIRSTDAYOFWEEK\": 6,\n    \"MONTH\": [\n      \"January\",\n      \"February\",\n      \"March\",\n      \"April\",\n      \"May\",\n      \"June\",\n      \"July\",\n      \"August\",\n      \"September\",\n      \"October\",\n      \"November\",\n      \"December\"\n    ],\n    \"SHORTDAY\": [\n      \"Sun\",\n      \"Mon\",\n      \"Tue\",\n      \"Wed\",\n      \"Thu\",\n      \"Fri\",\n      \"Sat\"\n    ],\n    \"SHORTMONTH\": [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\"\n    ],\n    \"STANDALONEMONTH\": [\n      \"January\",\n      \"February\",\n      \"March\",\n      \"April\",\n      \"May\",\n      \"June\",\n      \"July\",\n      \"August\",\n      \"September\",\n      \"October\",\n      \"November\",\n      \"December\"\n    ],\n    \"WEEKENDRANGE\": [\n      5,\n      6\n    ],\n    \"fullDate\": \"EEEE, MMMM d, y\",\n    \"longDate\": \"MMMM d, y\",\n    \"medium\": \"MMM d, y h:mm:ss a\",\n    \"mediumDate\": \"MMM d, y\",\n    \"mediumTime\": \"h:mm:ss a\",\n    \"short\": \"M/d/yy h:mm a\",\n    \"shortDate\": \"M/d/yy\",\n    \"shortTime\": \"h:mm a\"\n  },\n  \"NUMBER_FORMATS\": {\n    \"CURRENCY_SYM\": \"$\",\n    \"DECIMAL_SEP\": \".\",\n    \"GROUP_SEP\": \",\",\n    \"PATTERNS\": [\n      {\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 3,\n        \"minFrac\": 0,\n        \"minInt\": 1,\n        \"negPre\": \"-\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\",\n        \"posSuf\": \"\"\n      },\n      {\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 2,\n        \"minFrac\": 2,\n        \"minInt\": 1,\n        \"negPre\": \"-\\u00a4\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\\u00a4\",\n        \"posSuf\": \"\"\n      }\n    ]\n  },\n  \"id\": \"en\",\n  \"localeID\": \"en\",\n  \"pluralCat\": function(n, opt_precision) {  var i = n | 0;  var vf = getVF(n, opt_precision);  if (i == 1 && vf.v == 0) {    return PLURAL_CATEGORY.ONE;  }  return PLURAL_CATEGORY.OTHER;}\n});\n}]);\n","(function () {\n  'use strict';\n\n  angular\n    .module('app')\n    .config(stateConfig);\n\n  stateConfig.$inject = ['$stateProvider', '$urlRouterProvider'];\n\n  function stateConfig($stateProvider, $urlRouterProvider) {\n\n    $urlRouterProvider.otherwise('/');\n    $stateProvider.state('app', {\n      abstract: true,\n      template: '<ui-view class=\"fill\"/>',\n      resolve: {\n        translatePartialLoader: ['$translate', '$translatePartialLoader', function ($translate, $translatePartialLoader) {\n          $translatePartialLoader.addPart('global');\n          return $translate.refresh();\n        }]\n      }\n    });\n  }\n})();\n","(function () {\n  'use strict';\n  angular\n    .module('app')\n    .constant('BING_SPEECH_SUBSCRIPTION_KEY', \"8fb1a8c7b61a41d4838ddc60d84e6601\")\n    .constant('LUIS_APP_ID', \"496aaf6a-10e6-48fa-8b17-15658ddabde2\")\n    .constant('LUIS_SUBSCRIPTION_KEY', \"ebc99ea1bfe8481d9c01f8145a553187\");\n})();\n","angular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/home/home.html\",\"<div class=\\\"fill\\\">\\n\t<div class=\\\"container content mt-3\\\" scroll-glue>\\n\t\t<div class=\\\"row mb-2\\\" ng-repeat=\\\"message in vm.messages\\\">\\n\t\t\t<div class=\\\"col-3 col-sm-1\\\">\\n\t\t\t\t<img class=\\\"rounded img-fluid\\\" ng-src=\\\"content/images/{{message.user}}.png\\\">\\n\t\t\t</div>\\n\t\t\t<div class=\\\"col\\\">\\n\t\t\t\t<div class=\\\"card\\\" ng-class=\\\"message.user == \\'me\\' ? \\'card-outline-warning\\' : \\'card-outline-info\\'\\\">\\n\t\t\t\t\t<div class=\\\"card-block\\\">\\n\t\t\t\t\t\t<span class=\\\"card-title\\\"><strong class=\\\"capitalize\\\">{{message.user}}</strong></span>\\n\t\t\t\t\t\t<span class=\\\"card-subtitle\\\"><small class=\\\"ml-1 text-muted\\\">{{message.timestamp | amDateFormat: \\'HH:mm\\'}}</small></span>\\n\t\t\t\t\t\t<p class=\\\"card-text\\\" translate=\\\"{{message.content}}\\\" translate-values=\\\"{{message.values}}\\\"></p>\\n\t\t\t\t\t</div>\\n\t\t\t\t</div>\\n\t\t\t</div>\\n\t\t</div>\\n\t</div>\\n\\n\t<div class=\\\"container hidden-sm-down\\\">\\n\t\t<div class=\\\"row\\\">\\n\t\t\t<div class=\\\"col\\\">\\n\t\t\t\t<form ng-submit=\\\"vm.submit()\\\">\\n\t\t\t\t\t<div class=\\\"input-group\\\">\\n\t\t\t\t\t\t<span class=\\\"input-group-btn\\\">\\n\t\t\t\t\t<button type=\\\"button\\\" ng-click=\\\"vm.toggleRecording()\\\" class=\\\"btn btn-lg\\\" ng-class=\\\"vm.isRecording() ? \\'btn-danger\\' : \\'btn-success\\'\\\">\\n\t\t\t\t\t\t<i class=\\\"fa fa-2x\\\" ng-class=\\\"vm.isRecording() ? \\'fa-microphone-slash\\' : \\'fa-microphone\\'\\\" aria-hidden=\\\"true\\\"></i>\\n\t\t\t</button>\\n\t\t\t\t</span>\\n\t\t\t\t\t\t<input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"vm.text\\\" placeholder=\\\"{{ \\'home.form.placeholder\\' | translate }}\\\">\\n\t\t\t\t\t</div>\\n\t\t\t\t</form>\\n\t\t\t</div>\\n\t\t</div>\\n\t</div>\\n\\n\t<div class=\\\"hidden-sm-up fixed-bottom\\\">\\n\t\t<div class=\\\"row\\\">\\n\t\t\t<div class=\\\"col\\\">\\n\t\t\t\t<form ng-submit=\\\"vm.submit()\\\">\\n\t\t\t\t\t<div class=\\\"input-group\\\">\\n\t\t\t\t\t\t<span class=\\\"input-group-btn\\\">\\n\t\t\t\t\t<button type=\\\"button\\\" ng-click=\\\"vm.toggleRecording()\\\" class=\\\"btn no-rounded\\\" ng-class=\\\"vm.isRecording() ? \\'btn-danger\\' : \\'btn-success\\'\\\">\\n\t\t\t\t\t\t<i class=\\\"fa fa-2x\\\" ng-class=\\\"vm.isRecording() ? \\'fa-microphone-slash\\' : \\'fa-microphone\\'\\\" aria-hidden=\\\"true\\\"></i>\\n\t\t\t</button>\\n\t\t\t\t</span>\\n\t\t\t\t\t\t<input type=\\\"text\\\" class=\\\"form-control no-rounded\\\" ng-model=\\\"vm.text\\\" placeholder=\\\"{{ \\'home.form.placeholder\\' | translate }}\\\">\\n\t\t\t\t\t</div>\\n\t\t\t\t</form>\\n\t\t\t</div>\\n\t\t</div>\\n\t</div>\\n\\n\\n</div>\\n\");\n$templateCache.put(\"app/settings/settings.html\",\"<div class=\\\"container mt-3\\\">\\n  <form>\\n    <h4 translate=\\\"settings.stt.title\\\">Speech Recognition</h4>\\n    <div class=\\\"form-group row\\\">\\n      <label for=\\\"locale\\\" class=\\\"col-sm-2 col-form-label\\\" translate=\\\"settings.stt.locale\\\">Locale</label>\\n      <div class=\\\"col-sm-10\\\">\\n        <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"locale\\\" placeholder=\\\"en-US,fr-FR,..\\\" ng-model=\\\"vm.settings.stt.locale\\\" uib-typeahead=\\\"locale for locale in vm.locales | filter:$viewValue | limitTo:3\\\">\\n      </div>\\n    </div>\\n\\n    <h4 translate=\\\"settings.nlu.title\\\">Natural Language Understanding</h4>\\n    <div class=\\\"form-group row\\\">\\n      <label for=\\\"application\\\" class=\\\"col-sm-2 col-form-label\\\" translate=\\\"settings.nlu.application\\\">Application</label>\\n      <div class=\\\"col-sm-10\\\">\\n        <select class=\\\"form-control\\\" ng-model=\\\"vm.settings.nlu.application\\\" ng-options=\\\"it.name for it in vm.luisApplciations track by it.appId\\\"></select>\\n      </div>\\n    </div>\\n\\n\\n    <div class=\\\"form-group row\\\">\\n      <div class=\\\"offset-sm-2 col-sm-10 text-right\\\">\\n        <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"vm.save()\\\"><i class=\\\"fa fa-floppy-o\\\" aria-hidden=\\\"true\\\"></i>&nbsp;<span translate=\\\"settings.save\\\">Save</span></button>\\n      </div>\\n    </div>\\n  </form>\\n</div>\\n\");}]);"]}